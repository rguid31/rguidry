<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chat with Ryan's Digital Assistant</title>

    <!-- 1. Link to your EXISTING stylesheet -->
    <link rel="stylesheet" href="style.css">

    <!-- 2. Link to Tailwind CSS (required for the chatbot's layout) -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- 3. Link to Google Fonts (to match your site) -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

    <!-- 4. Copy the chatbot's SPECIFIC styles -->
    <style>
        /* These are the custom styles from the chatbot code */
        body {
            font-family: 'Inter', sans-serif;
            background-color: #F9FAFB;
        }
        .chat-container {
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.05), 0 6px 6px rgba(0, 0, 0, 0.07);
            transition: all 0.3s ease;
        }
        .messages-area::-webkit-scrollbar { width: 6px; }
        .messages-area::-webkit-scrollbar-track { background: #f1f1f1; border-radius: 10px; }
        .messages-area::-webkit-scrollbar-thumb { background: #d1d5db; border-radius: 10px; }
        .messages-area::-webkit-scrollbar-thumb:hover { background: #9ca3af; }
        .message { max-width: 75%; padding: 10px 16px; border-radius: 18px; line-height: 1.5; word-wrap: break-word; }
        .message.user { background-color: #2563EB; color: white; border-bottom-right-radius: 4px; }
        .message.bot { background-color: #E5E7EB; color: #1F2937; border-bottom-left-radius: 4px; }
        .typing-indicator { display: flex; align-items: center; padding: 10px 0; }
        .typing-indicator span { height: 8px; width: 8px; margin: 0 2px; background-color: #9ca3af; border-radius: 50%; display: inline-block; animation: bounce 1.4s infinite ease-in-out both; }
        .typing-indicator span:nth-child(1) { animation-delay: -0.32s; }
        .typing-indicator span:nth-child(2) { animation-delay: -0.16s; }
        @keyframes bounce { 0%, 80%, 100% { transform: scale(0); } 40% { transform: scale(1.0); } }
        .send-btn { background-color: #2563EB; transition: background-color 0.3s ease; }
        .send-btn:hover { background-color: #1D4ED8; }
        .send-btn:disabled { background-color: #93C5FD; cursor: not-allowed; }
    </style>
</head>
<body class="flex items-center justify-center min-h-screen bg-gray-50">

    <div id="chatbot" class="chat-container w-full max-w-2xl h-[90vh] max-h-[700px] bg-white rounded-2xl flex flex-col mx-4">
        
        <!-- Chat Header -->
        <div class="p-4 border-b border-gray-200 flex items-center space-x-4 flex-shrink-0">
            <img src="https://placehold.co/48x48/2563EB/FFFFFF?text=RG" alt="Avatar" class="w-12 h-12 rounded-full">
            <div>
                <h1 class="text-lg font-semibold text-gray-800">Ryan's Digital Assistant</h1>
                <p class="text-sm text-green-500 flex items-center">
                    <span class="w-2 h-2 bg-green-500 rounded-full mr-2"></span>
                    Online
                </p>
            </div>
        </div>

        <!-- Messages Area -->
        <div id="messages-area" class="messages-area flex-1 p-6 space-y-4 overflow-y-auto">
            <!-- Initial bot message -->
            <div class="flex justify-start">
                <div class="message bot">
                    Hey there! I'm the digital assistant for Ryan Guidry. I can answer questions about his skills, projects, and experience. What's on your mind?
                </div>
            </div>
        </div>

        <!-- Input Area -->
        <div class="p-4 bg-white border-t border-gray-200 flex-shrink-0">
            <form id="chat-form" class="flex items-center space-x-3">
                <input 
                    type="text" 
                    id="user-input" 
                    placeholder="Ask about my projects, skills, etc..."
                    class="flex-1 w-full px-4 py-2 bg-gray-100 border border-transparent rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition"
                    autocomplete="off">
                <button 
                    type="submit" 
                    id="send-btn"
                    class="send-btn text-white rounded-full p-3 flex items-center justify-center">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-up"><line x1="12" y1="19" x2="12" y2="5"></line><polyline points="5 12 12 5 19 12"></polyline></svg>
                </button>
            </form>
        </div>
    </div>

    <script>
        // --- DOM Element References ---
        const chatForm = document.getElementById('chat-form');
        const userInput = document.getElementById('user-input');
        const messagesArea = document.getElementById('messages-area');
        const sendButton = document.getElementById('send-btn');

        // --- KNOWLEDGE BASE ---
        // This is the "brain" of your chatbot.
        // Fill this with information about yourself, your skills, projects, and answers to common questions.
        // The more detail you provide, the smarter your chatbot will be.
        const KNOWLEDGE_BASE = `
            ABOUT RYAN GUIDRY:
            - 29-year-old self-taught web developer and programmer from Baton Rouge, Louisiana
            - Holds a Google Data Analytics Professional Certificate
            - Passionate about building clean, efficient, and user-friendly web applications
            - Currently working on his portfolio website: https://www.rguidry.dev
            - Strong background in problem-solving and analytical thinking
            - Quick learner who enjoys exploring new technologies and frameworks
            - Professional yet approachable personality
            - Values clean code, good UX design, and data-driven decision making

            TECHNICAL SKILLS:
            Frontend Development:
            - HTML5, CSS3, JavaScript (ES6+)
            - Responsive web design and mobile-first development
            - Modern CSS frameworks and methodologies
            - Cross-browser compatibility and web standards
            - UI/UX design principles
            
            Data Analytics:
            - SQL for database querying and data manipulation
            - R programming for statistical analysis
            - Tableau for data visualization and dashboards
            - Google Sheets/Excel for data analysis
            - Statistical analysis and data interpretation
            - Data cleaning and preprocessing
            
            General Skills:
            - Version control with Git
            - Problem-solving and debugging
            - Project management and organization
            - Technical documentation
            - Continuous learning and adaptation

            PROJECTS & PORTFOLIO:
            - Personal Portfolio Website (rguidry.dev): A comprehensive showcase of skills and projects, built from scratch using modern web technologies
            - Interactive chat assistant: AI-powered chatbot for visitor engagement
            - Various data analysis projects demonstrating statistical and visualization skills
            - Clean, responsive web designs focusing on user experience
            - All projects emphasize clean code, accessibility, and performance

            PROFESSIONAL BACKGROUND:
            - Self-taught developer with strong foundation in web technologies
            - Google Data Analytics Professional Certificate holder
            - Experience in both technical development and data analysis
            - Proven ability to learn new technologies quickly and independently
            - Strong attention to detail and commitment to quality work

            CAREER GOALS & INTERESTS:
            - Seeking opportunities in web development or data analytics
            - Interested in roles where he can contribute meaningfully while continuing to grow
            - Open to both freelance projects and full-time positions
            - Passionate about creating solutions that make a real impact
            - Enjoys collaborating with teams and learning from experienced developers
            - Interested in modern web frameworks, data visualization, and emerging technologies

            PERSONALITY & WORK STYLE:
            - Analytical and detail-oriented approach to problem-solving
            - Strong communication skills and ability to explain technical concepts clearly
            - Collaborative team player who also works well independently
            - Proactive learner who stays current with industry trends
            - Values clean, maintainable code and good documentation
            - User-focused mindset in all development work

            CONTACT & AVAILABILITY:
            - Best contacted through the contact form on his website (rguidry.dev)
            - Email: inquireryan@gmail.com
            - Based in Baton Rouge, Louisiana
            - Available for freelance projects and full-time opportunities
            - Open to remote work and local opportunities
            - Responsive to inquiries and professional communications

            COMMON QUESTIONS:
            Q: What makes Ryan different from other developers?
            A: Ryan combines technical web development skills with strong data analytics capabilities, giving him a unique perspective on building data-driven web applications. His self-taught background demonstrates strong motivation and learning ability.
            
            Q: What types of projects is Ryan most interested in?
            A: Ryan is particularly interested in projects that combine web development with data visualization, user-friendly interfaces for complex data, and applications that solve real-world problems.
            
            Q: What is Ryan's experience level?
            A: While Ryan is self-taught and building his professional portfolio, he has demonstrated proficiency in multiple technologies and holds industry-recognized certifications. He brings fresh perspectives and strong foundational skills.
            
            Q: Is Ryan available for hire?
            A: Yes, Ryan is actively seeking both freelance projects and full-time opportunities in web development and data analytics roles.
        `;

        // --- CHAT HISTORY ---
        // We store the conversation history to give the AI context.
        let chatHistory = [];

        // --- EVENT LISTENER FOR FORM SUBMISSION ---
        chatForm.addEventListener('submit', async (event) => {
            event.preventDefault();
            const userMessage = userInput.value.trim();

            if (userMessage) {
                // 1. Display the user's message immediately
                addMessage(userMessage, 'user');
                userInput.value = '';
                
                // 2. Disable input and show typing indicator
                toggleInput(false);
                showTypingIndicator();

                // 3. Get the bot's response
                try {
                    const botResponse = await getBotResponse(userMessage);
                    // 4. Remove typing indicator and display bot's response
                    hideTypingIndicator();
                    addMessage(botResponse, 'bot');
                } catch (error) {
                    console.error("Error getting bot response:", error);
                    hideTypingIndicator();
                    addMessage("Oops! Something went wrong. Please try again.", 'bot');
                } finally {
                    // 5. Re-enable the input form
                    toggleInput(true);
                }
            }
        });

        // --- HELPER FUNCTIONS ---

        /**
         * Adds a message to the chat window.
         * @param {string} text - The message text.
         * @param {string} sender - 'user' or 'bot'.
         */
        function addMessage(text, sender) {
            const messageWrapper = document.createElement('div');
            messageWrapper.className = `flex ${sender === 'user' ? 'justify-end' : 'justify-start'}`;
            
            const messageElement = document.createElement('div');
            messageElement.className = `message ${sender}`;
            messageElement.textContent = text;
            
            messageWrapper.appendChild(messageElement);
            messagesArea.appendChild(messageWrapper);

            // Scroll to the latest message
            messagesArea.scrollTop = messagesArea.scrollHeight;
        }

        /**
         * Shows the "Bot is typing..." indicator.
         */
        function showTypingIndicator() {
            const indicator = document.createElement('div');
            indicator.id = 'typing-indicator';
            indicator.className = 'typing-indicator';
            indicator.innerHTML = `
                <div class="flex justify-start">
                    <div class="message bot">
                        <div class="typing-indicator">
                            <span></span><span></span><span></span>
                        </div>
                    </div>
                </div>`;
            messagesArea.appendChild(indicator);
            messagesArea.scrollTop = messagesArea.scrollHeight;
        }

        /**
         * Hides the "Bot is typing..." indicator.
         */
        function hideTypingIndicator() {
            const indicator = document.getElementById('typing-indicator');
            if (indicator) {
                indicator.remove();
            }
        }

        /**
         * Enables or disables the input form.
         * @param {boolean} enabled - True to enable, false to disable.
         */
        function toggleInput(enabled) {
            userInput.disabled = !enabled;
            sendButton.disabled = !enabled;
            if (enabled) {
                userInput.focus();
            }
        }

        // --- GEMINI API INTEGRATION ---

        /**
         * Gets a response from the Gemini API.
         * @param {string} userPrompt - The user's latest message.
         * @returns {Promise<string>} The bot's response text.
         */
        async function getBotResponse(userPrompt) {
            // The system prompt instructs the AI on its role and personality.
            const systemPrompt = `You are a helpful, friendly, and professional chatbot assistant for Ryan Guidry. Your goal is to answer questions about him based ONLY on the provided KNOWLEDGE_BASE. Be conversational and concise. Do not make up information. If a question is outside the scope of the knowledge base, politely state that you can only answer questions about Ryan's professional background and skills.`;
            
            // Add the new user message to the history
            chatHistory.push({ role: "user", parts: [{ text: userPrompt }] });

            // Construct the payload for the API
            const payload = {
                contents: [
                    // This is where we give the model its instructions and data
                    {
                        role: "user",
                        parts: [{ text: `${systemPrompt}\n\nKNOWLEDGE_BASE:\n${KNOWLEDGE_BASE}` }]
                    },
                    {
                        role: "model",
                        parts: [{ text: "Understood. I am ready to answer questions about Ryan Guidry based on the provided knowledge." }]
                    },
                    // The rest of the conversation history follows
                    ...chatHistory
                ]
            };
            
            // TO GET YOUR FREE API KEY:
            // 1. Go to https://aistudio.google.com/app/apikey
            // 2. Sign in with your Google account
            // 3. Click "Create API Key"
            // 4. Copy the key and paste it below (replace "YOUR_API_KEY_HERE")
            const apiKey = "AIzaSyB6zzGoh3PIPi5YVr54-xJarpwhBrNNA-w"; // Replace with your actual Gemini API key
            
            // If no API key is provided, use a simple fallback system
            if (!apiKey || apiKey === "YOUR_API_KEY_HERE" || apiKey === "") {
                return getSimpleFallbackResponse(userPrompt);
            }
            
            const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:generateContent?key=${apiKey}`;

            const response = await fetch(apiUrl, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(payload)
            });

            if (!response.ok) {
                console.error(`API request failed with status ${response.status}`);
                return getSimpleFallbackResponse(userPrompt);
            }

            const result = await response.json();
            
            const botText = result?.candidates?.[0]?.content?.parts?.[0]?.text || "I'm not sure how to respond to that. Could you ask in a different way?";

            // Add the bot's response to our history for context in future turns
            chatHistory.push({ role: "model", parts: [{ text: botText }] });

            return botText;
        }

        /**
         * Simple fallback response system that works without an API key
         * Uses keyword matching to provide relevant responses from the knowledge base
         */
        function getSimpleFallbackResponse(userInput) {
            const input = userInput.toLowerCase();
            
            // Skills-related questions
            if (input.includes('skill') || input.includes('technology') || input.includes('programming') || input.includes('language')) {
                return "Ryan has strong skills in frontend development (HTML, CSS, JavaScript), data analytics (SQL, R, Tableau), and general programming. He's also experienced with Git, responsive design, and data visualization. He's always learning new technologies!";
            }
            
            // Experience and background
            if (input.includes('experience') || input.includes('background') || input.includes('work') || input.includes('job')) {
                return "Ryan is a self-taught web developer and programmer with a Google Data Analytics Professional Certificate. While building his professional portfolio, he has strong foundational skills and brings fresh perspectives to development work.";
            }
            
            // Projects
            if (input.includes('project') || input.includes('portfolio') || input.includes('work') || input.includes('built')) {
                return "Ryan's main project is his personal portfolio website (rguidry.dev), built from scratch using modern web technologies. He's also created this interactive chat assistant and various data analysis projects. All his work emphasizes clean code and good user experience.";
            }
            
            // Contact and availability
            if (input.includes('contact') || input.includes('hire') || input.includes('available') || input.includes('email')) {
                return "You can contact Ryan through the contact form on his website (rguidry.dev) or email him at inquireryan@gmail.com. He's available for both freelance projects and full-time opportunities in web development and data analytics.";
            }
            
            // Location
            if (input.includes('location') || input.includes('where') || input.includes('live') || input.includes('based')) {
                return "Ryan is based in Baton Rouge, Louisiana. He's open to both remote work and local opportunities.";
            }
            
            // Education and learning
            if (input.includes('education') || input.includes('learn') || input.includes('study') || input.includes('certificate')) {
                return "Ryan is self-taught in web development and holds a Google Data Analytics Professional Certificate. He's a quick learner who enjoys exploring new technologies and staying current with industry trends.";
            }
            
            // Personality and work style
            if (input.includes('personality') || input.includes('work style') || input.includes('team') || input.includes('collaborate')) {
                return "Ryan has an analytical and detail-oriented approach to problem-solving. He's a collaborative team player who also works well independently, with strong communication skills and a user-focused mindset in all his development work.";
            }
            
            // Goals and interests
            if (input.includes('goal') || input.includes('interest') || input.includes('future') || input.includes('want')) {
                return "Ryan is seeking opportunities in web development or data analytics where he can contribute meaningfully while continuing to grow. He's particularly interested in projects that combine web development with data visualization and solve real-world problems.";
            }
            
            // Greeting responses
            if (input.includes('hello') || input.includes('hi') || input.includes('hey') || input.includes('good morning') || input.includes('good afternoon')) {
                return "Hello! I'm Ryan's digital assistant. I can tell you about his skills, projects, experience, and availability. What would you like to know about Ryan?";
            }
            
            // Default response
            return "I can help you learn about Ryan Guidry's skills, projects, experience, and availability. Try asking about his technical skills, background, projects, or how to contact him. What would you like to know?";
        }

    </script>
</body>
</html>
